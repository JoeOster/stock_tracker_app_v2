/* style.css - v2.9 (Multi-Account Theming) */
:root {
    --bg-color: #f4f7f9;
    --text-color: #333;
    --heading-color: #2c3e50;
    --container-bg: #fff;
    --container-border: #ddd;
    --header-bg: #ecf0f1;
    --header-text: #34495e;
    --tab-hover-bg: #f0f0f0;
    --tab-active-bg: #fff;
    --input-bg: #fff;
    --input-border: #ccc;
    --info-panel-bg: #f8f9f9;
    --row-alt-bg: #f9f9f9;
    --button-primary-bg: #3498db;
    --button-primary-hover: #2980b9;
    --positive-text: #27ae60;
    --negative-text: #c0392b;
}

body[data-theme="dark"] {
    --bg-color: #1a202c;
    --text-color: #cbd5e0;
    --heading-color: #e2e8f0;
    --container-bg: #2d3748;
    --container-border: #4a5568;
    --header-bg: #4a5568;
    --header-text: #e2e8f0;
    --tab-hover-bg: #4a5568;
    --tab-active-bg: #2d3748;
    --input-bg: #4a5568;
    --input-border: #718096;
    --info-panel-bg: #4a5568;
    --row-alt-bg: #4a5568;
}

body[data-theme="sepia"] {
    --bg-color: #f1e7d0;
    --text-color: #433421;
    --heading-color: #433421;
    --container-bg: #fffaf0;
    --container-border: #d3c4a2;
    --header-bg: #e4d8b4;
    --header-text: #433421;
    --tab-hover-bg: #e4d8b4;
    --tab-active-bg: #fffaf0;
    --input-bg: #fffaf0;
    --input-border: #d3c4a2;
    --info-panel-bg: #f8f2e3;
    --row-alt-bg: #f8f2e3;
}

body[data-theme="contrast"] {
    --bg-color: #000;
    --text-color: #fff;
    --heading-color: #fff;
    --container-bg: #000;
    --container-border: #fff;
    --header-bg: #000;
    --header-text: #fff;
    --tab-hover-bg: #333;
    --tab-active-bg: #000;
    --input-bg: #000;
    --input-border: #fff;
    --info-panel-bg: #222;
    --row-alt-bg: #222;
}


body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; background-color: var(--bg-color); color: var(--text-color); margin:0;padding:20px}
.header{position:relative;display:flex;justify-content:center;align-items:center;padding-bottom:15px; border-bottom: 1px solid var(--container-border); margin-bottom: 15px;}
h1,h2,h3{text-align:center;color: var(--heading-color);margin-top:0}
#settings-btn{background:0 0;border:none;font-size:1.5em;cursor:pointer;padding:0;line-height:1; color: var(--heading-color);}
#api-timer-container{position:absolute;top:10px;right:20px;background-color:var(--header-bg);color:var(--header-text);padding:8px 12px;border-radius:5px;font-size:.9em;font-family:monospace}
.container{background-color:var(--container-bg);padding:20px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin-bottom:20px;max-width:1400px;margin-left:auto;margin-right:auto;overflow-x:auto}
#add-transaction-form{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center}
#add-transaction-form input,#add-transaction-form select,#add-transaction-form button{padding:10px;border:1px solid var(--input-border); background-color: var(--input-bg); color: var(--text-color); border-radius:4px;font-size:16px;flex-grow:1}
#add-transaction-form button{background-color:var(--button-primary-bg);color:#fff;border:none;cursor:pointer;transition:background-color .3s;flex-grow:0}
#add-transaction-form button:hover{background-color:var(--button-primary-hover)}
table{width:100%;border-collapse:collapse;min-width:1200px}
#pl-summary-table, #pl-summary-ranged-table, #snapshots-table {min-width:auto;margin:0 auto;width:auto}
th,td{border:1px solid var(--container-border);padding:12px;text-align:left;}
th{background-color:var(--header-bg);font-weight:700; color: var(--heading-color);}
th.numeric,td.numeric{text-align:right}
tbody tr:nth-child(even){background-color:var(--row-alt-bg)}
#ledger-table thead th[data-sort],#stock-table thead th[data-sort]{cursor:pointer}
#ledger-table thead th[data-sort]:hover,#stock-table thead th[data-sort]:hover{background-color:var(--tab-hover-bg)}
#ledger-table thead th[data-sort].sorted-asc::after, #stock-table thead th[data-sort].sorted-asc::after{content:' ▲';font-size:.8em}
#ledger-table thead th[data-sort].sorted-desc::after, #stock-table thead th[data-sort].sorted-desc::after{content:' ▼';font-size:.8em}
.actions-cell button{margin-right:5px}.modify-btn,.sell-from-lot-btn{background-color:#27ae60;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}.modify-btn:hover,.sell-from-lot-btn:hover{background-color:#229954}.delete-btn{background-color:#e74c3c;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}.delete-btn:hover{background-color:#c0392b}
.positive{color:var(--positive-text);font-weight:700}.negative{color:var(--negative-text);font-weight:700}
#daily-performance-summary{display:flex;justify-content:space-around;align-items:center;background-color:var(--info-panel-bg);padding:15px;border-radius:5px;margin-bottom:20px;border:1px solid var(--container-border)}
#daily-performance-summary h3 { color: var(--heading-color); }
#refresh-prices-btn{padding:8px 12px;font-size:.9em;border:1px solid var(--button-primary-bg);background-color:var(--input-bg);color:var(--button-primary-bg);border-radius:5px;cursor:pointer}
#refresh-prices-btn:hover{background-color:var(--tab-hover-bg)}
#refresh-prices-btn:disabled{cursor:not-allowed;background-color:#eee}
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.5);justify-content:center;align-items:center}
.modal.visible{display:flex}
.modal-content{background-color:var(--container-bg);padding:20px 30px;border:1px solid var(--container-border);width:80%;max-width:500px;border-radius:8px;box-shadow:0 5px 15px rgba(0,0,0,.3);position:relative}
.modal-content.modal-large{max-width:90vw;max-height:90vh}
.close-button{color:#aaa;position:absolute;top:10px;right:20px;font-size:28px;font-weight:700;cursor:pointer;line-height:1}
.close-button:hover,.close-button:focus{color:var(--text-color)}
.tabs{display:flex;border-bottom:2px solid var(--input-border);margin-bottom:20px;padding:0 10px;flex-wrap:wrap}
.tab{padding:10px 15px;cursor:pointer;border:1px solid transparent;border-bottom:none;margin-bottom:-2px}
.tab:hover{background-color:var(--tab-hover-bg)}
.tab.active{border-color:var(--input-border);border-bottom:2px solid var(--tab-active-bg);background-color:var(--tab-active-bg);border-radius:4px 4px 0 0;font-weight:700}
.form-group{text-align:left;margin-bottom:10px}.form-group label{display:block;margin-bottom:5px;font-weight:bold}
.form-group input,.form-group select{width:100%;padding:8px;box-sizing:border-box;border:1px solid var(--input-border); background-color: var(--input-bg); color: var(--text-color); border-radius:4px}
.chart-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:30px;margin-bottom:40px}
.chart-container {position: relative; padding: 15px; border: 1px solid var(--container-border); border-radius: 5px; min-height: 300px;}
.chart-container canvas {position: absolute;top: 0;left: 0;width: 100%;height: 100%;}
.ledger-controls{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-bottom:20px;align-items:start}
.ledger-filters,.import-section{background-color:var(--info-panel-bg);padding:20px;border:1px solid var(--container-border);border-radius:5px;display:flex;flex-direction:column;gap:15px}
.custom-date-container{display:flex;justify-content:flex-end;align-items:center;gap:10px;padding:0 20px 15px 20px;max-width:1400px;margin:0 auto}
.loader{display:inline-block;width:16px;height:16px;border:2px solid rgba(0,0,0,.1);border-top-color:#333;border-radius:50%;animation:spin .6s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
#toast-container{position:fixed;top:20px;right:20px;z-index:2000;display:flex;flex-direction:column;gap:10px}
.toast{padding:15px 20px;border-radius:5px;color:#fff;font-size:1em;box-shadow:0 4px 12px rgba(0,0,0,.15);opacity:0;transform:translateX(100%);animation:slideIn .3s forwards,fadeOut .5s 2.7s forwards}
.toast.toast-info{background-color:#3498db}.toast.toast-success{background-color:#27ae60}.toast.toast-error{background-color:#c0392b}
@keyframes slideIn{to{opacity:1;transform:translateX(0)}}@keyframes fadeOut{to{opacity:0;transform:scale(.9)}}
#ledger-page-container #add-transaction-container { display: block !important; }
.form-group-with-button {display: flex; align-items: flex-end; gap: 5px;}
.form-group-with-button input {flex-grow: 1;}
.clear-limit-btn {padding: 8px 12px;background-color: #ecf0f1;border: 1px solid #bdc3c7;color: #c0392b;font-weight: bold;cursor: pointer;border-radius: 4px;line-height: 1.2;}
.clear-limit-btn:hover {background-color: #dfe6e9;}
.pl-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px;}
#ledger-summary-container {padding: 15px; margin: 0 0 20px 0; background-color: var(--info-panel-bg); border: 1px solid var(--container-border); border-radius: 5px; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px; text-align: center;}
#ledger-summary-container div h4 {margin: 0 0 5px 0; color: #555; font-size: 0.9em; text-transform: uppercase;}
#ledger-summary-container div p {margin: 0; font-size: 1.2em; font-weight: bold;}
.new-date-group td { border-top: 2px solid var(--button-primary-bg); }
.snapshot-content-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 40px; align-items: start;}
#add-snapshot-form { display: flex; flex-direction: column; gap: 15px;}
#add-snapshot-container { background-color: var(--info-panel-bg); padding: 20px; border: 1px solid var(--container-border); border-radius: 5px;}
.table-section-header { text-align: center; background-color: var(--info-panel-bg); }
#positions-summary-title { background-color: #e8f6f3; }
body[data-theme="dark"] #positions-summary-title, body[data-theme="dark"] .table-section-header { background-color: var(--header-bg); color: var(--heading-color); }
body[data-theme="sepia"] #positions-summary-title, body[data-theme="sepia"] .table-section-header { background-color: var(--header-bg); color: var(--heading-color); }
body[data-theme="contrast"] #positions-summary-title, body[data-theme="contrast"] .table-section-header { background-color: var(--header-bg); color: var(--heading-color); }

/* Sticky Column Styles */
#stock-table th:first-child,#stock-table td:first-child,#portfolio-overview-table th:first-child,#portfolio-overview-table td:first-child,#ledger-table th:first-child,#ledger-table td:first-child {position: -webkit-sticky; position: sticky; left: 0; z-index: 2;}
#stock-table th:first-child,#portfolio-overview-table th:first-child,#ledger-table th:first-child {background-color: var(--header-bg);}
#stock-table td:first-child,#portfolio-overview-table td:first-child,#ledger-table td:first-child {background-color: var(--container-bg);}
#stock-table tbody tr:nth-child(even) td:first-child,#portfolio-overview-table tbody tr:nth-child(even) td:first-child,#ledger-table tbody tr:nth-child(even) td:first-child {background-color: var(--row-alt-bg);}

.global-controls { position: absolute; top: 10px; left: 20px; display: flex; align-items: center; gap: 20px; }
.account-holder-filter-container { display: flex; align-items: center; gap: 8px; }
.account-holder-filter-container label { font-size: 0.9em; color: var(--text-color); }
.account-holder-filter-container select { padding: 8px; font-size: 0.9em; border-radius: 4px; background-color: var(--input-bg); color: var(--text-color); border: 1px solid var(--input-border); }

#add-transaction-form {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    align-items: end;
}
#add-transaction-form button {
    grid-column: -1 / -2; /* Place button in the last column */
}
.advanced-options {
    grid-column: 1 / -1; /* Span all columns */
}
.form-grid {
    display: contents; /* Allow children to be part of the parent grid */
}

