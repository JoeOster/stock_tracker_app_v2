<div id="selective-sell-modal" class="modal">
    <div class="modal-content modal-large">
        <span class="close-button">&times;</span>
        <h2 id="selective-sell-title">Sell Ticker</h2>
        <form id="selective-sell-form">
            <input type="hidden" id="selective-sell-ticker">
            <input type="hidden" id="selective-sell-exchange">
            <input type="hidden" id="selective-sell-account-holder-id">

            <div class="form-group">
                <label for="selective-sell-total-quantity">Total Quantity to Sell</label>
                <input type="number" id="selective-sell-total-quantity" step="any" min="0.00001" required>
                <small>Available: <span id="selective-sell-available-qty">--</span></small>
            </div>
            <div class="form-group">
                <label for="selective-sell-price">Sale Price Per Share</label>
                <input type="number" id="selective-sell-price" step="any" min="0.01" required>
            </div>
            <div class="form-group">
                <label for="selective-sell-date">Sale Date</label>
                <input type="date" id="selective-sell-date" required>
            </div>

            <hr style="margin: 1.5rem 0;">

            <h4>Select Lots to Sell From (Oldest First Recommended)</h4>
            <p class="subtitle" style="text-align: left; margin: 0 0 10px 0;">Enter quantity to sell from each lot. Total must match 'Total Quantity to Sell' above.</p>
            <table id="selective-sell-lots-table">
                <thead>
                    <tr>
                        <th>Purchase Date</th>
                        <th class="numeric">Cost Basis</th>
                        <th class="numeric">Qty Available</th>
                        <th class="numeric" style="width: 120px;">Qty to Sell</th>
                    </tr>
                </thead>
                <tbody id="selective-sell-lots-body">
                    <tr><td colspan="4">Loading lots...</td></tr>
                </tbody>
            </table>
            <div style="text-align: right; margin-top: 10px; font-weight: bold;">
                Total Selected: <span id="selective-sell-selected-total">0</span>
            </div>
            <div id="selective-sell-validation-message" style="color: var(--negative-color); text-align: center; margin-top: 10px; font-weight: bold; display: none;">
                Total selected quantity must match the total quantity to sell.
            </div>


            <div class="modal-actions">
                 <div class="modal-actions-right">
                     <button type="button" class="cancel-btn close-button">Cancel</button>
                     <button type="submit" id="selective-sell-submit-btn">Log Sale</button>
                 </div>
            </div>
        </form>
    </div>
</div>